<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.shape.Polygon?>
<?import javafx.scene.shape.Rectangle?>
<?import javafx.geometry.Pos?>
<?import java.lang.Double?>
<?import javafx.scene.control.Button?>

<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.shape.Circle?>

<Pane fx:id="rootPane"
    prefHeight="864.0"
    prefWidth="1536.0"
    xmlns="http://javafx.com/javafx"
    xmlns:fx="http://javafx.com/fxml/1"
    fx:controller="com.example.view.CurrentPlayerController">

    <!-- Bottom-half background -->
    <Rectangle fx:id="bottomBackground"
        width="819"
        height="432"
        StackPane.alignment="CENTER_LEFT"
        translateX="0" />

    <!-- Current player info -->
    <StackPane fx:id="currentPlayerPane" alignment="TOP_CENTER" prefHeight="150"
        prefWidth="819" layoutY="0">
        <Polygon fx:id="currentPlayerBox"
            styleClass="parallelogram"
            fill="#5050A0"
            stroke="black"
            strokeWidth="8">
            <points>
                <Double fx:value="45.0" />
                <Double fx:value="0.0" />
                <Double fx:value="365.0" />
                <Double fx:value="0.0" />
                <Double fx:value="320.0" />
                <Double fx:value="80.0" />
                <Double fx:value="0.0" />
                <Double fx:value="80.0" />
            </points>
        </Polygon>

        <Label fx:id="currentPlayerDisplay"
            styleClass="current-player-label" />

        <VBox fx:id="currentPlayerResourcesBox"
            alignment="CENTER"
            spacing="5.0"
            layoutY="90.0">
            <!-- Resource labels will be added dynamically -->
        </VBox>
    </StackPane>

    <!-- Bottom HUD Area -->
    <Pane fx:id="hudPane" layoutY="150" prefHeight="282" prefWidth="819">
        <VBox spacing="6" style="-fx-padding: 6;">

            <!-- 3-Column Grid: Resources | Trackers & Dev Cards | Score & Actions -->
            <HBox spacing="6" prefHeight="320" VBox.vgrow="ALWAYS">

                <!-- Add icons later -->
                <!-- Resources Column -->
                <VBox spacing="3" prefWidth="145" fx:id="resourcesBox">
                    <Label text="Resources"
                        style="-fx-font-size: 10; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 0 0 3 0;" />

                    <!-- Added Dynamic Resource Labels -->
                </VBox>

                <!-- Column Separator -->
                <Separator orientation="VERTICAL" opacity="0.2" />

                <!-- Trackers & Dev Cards Column -->
                <VBox spacing="2" prefWidth="175">

                    <!-- Longest Road -->
                    <StackPane prefHeight="60" alignment="CENTER">
                        <Polygon fill="#5050A0" stroke="black" strokeWidth="2">
                            <points>
                                <Double fx:value="15.0" />
                                <Double fx:value="0.0" />
                                <Double fx:value="170.0" />
                                <Double fx:value="0.0" />
                                <Double fx:value="155.0" />
                                <Double fx:value="60.0" />
                                <Double fx:value="0.0" />
                                <Double fx:value="60.0" />
                            </points>
                        </Polygon>
                        <VBox alignment="TOP_CENTER" spacing="3">
                            <Label text="Longest Road"
                                style="-fx-font-size: 9; -fx-text-fill: white; -fx-font-weight: bold;" />
                            <HBox spacing="5" alignment="CENTER">
                                <Circle radius="6" fill="white" stroke="black"
                                    strokeWidth="1.5" />
                                <Circle radius="6" fill="white" stroke="black"
                                    strokeWidth="1.5" />
                                <Circle radius="6" fill="white" stroke="black"
                                    strokeWidth="1.5" />
                                <Circle radius="6" fill="white" stroke="black"
                                    strokeWidth="1.5" />
                                <Circle radius="6" fill="white" stroke="black"
                                    strokeWidth="1.5" />
                            </HBox>
                        </VBox>
                    </StackPane>

                    <!-- Cleanest Environment -->
                    <StackPane prefHeight="60" alignment="CENTER">
                        <Polygon fill="#5050A0" stroke="black" strokeWidth="2">
                            <points>
                                <Double fx:value="15.0" />
                                <Double fx:value="0.0" />
                                <Double fx:value="170.0" />
                                <Double fx:value="0.0" />
                                <Double fx:value="155.0" />
                                <Double fx:value="60.0" />
                                <Double fx:value="0.0" />
                                <Double fx:value="60.0" />
                            </points>
                        </Polygon>
                        <VBox alignment="TOP_CENTER" spacing="3">
                            <Label text="Cleanest Env"
                                style="-fx-font-size: 9; -fx-text-fill: white; -fx-font-weight: bold;" />
                            <HBox spacing="5" alignment="CENTER">
                                <Circle radius="6" fill="white" stroke="black"
                                    strokeWidth="1.5" />
                                <Circle radius="6" fill="white" stroke="black"
                                    strokeWidth="1.5" />
                                <Circle radius="6" fill="white" stroke="black"
                                    strokeWidth="1.5" />
                            </HBox>
                        </VBox>
                    </StackPane>

                    <!-- Development Cards -->
                    <StackPane prefHeight="70" maxHeight="70" alignment="CENTER">
                        <Polygon fill="#5050A0" stroke="black" strokeWidth="2">
                            <points>
                                <Double fx:value="15.0" />
                                <Double fx:value="0.0" />
                                <Double fx:value="170.0" />
                                <Double fx:value="0.0" />
                                <Double fx:value="155.0" />
                                <Double fx:value="70.0" />
                                <Double fx:value="0.0" />
                                <Double fx:value="70.0" />
                            </points>
                        </Polygon>
                        <VBox alignment="TOP_CENTER" spacing="2">
                            <Label text="Dev Cards"
                                style="-fx-font-size: 8; -fx-text-fill: white; -fx-font-weight: bold;" />
                            <HBox spacing="2" alignment="CENTER">
                                <Rectangle width="28" height="36"
                                    arcWidth="2" arcHeight="2"
                                    fill="white" stroke="black" strokeWidth="1.5" />
                                <Rectangle width="28" height="36"
                                    arcWidth="2" arcHeight="2"
                                    fill="white" stroke="black" strokeWidth="1.5" />
                                <Rectangle width="28" height="36"
                                    arcWidth="2" arcHeight="2"
                                    fill="white" stroke="black" strokeWidth="1.5" />
                                <Rectangle width="28" height="36"
                                    arcWidth="2" arcHeight="2"
                                    fill="white" stroke="black" strokeWidth="1.5" />
                            </HBox>
                        </VBox>
                    </StackPane>
                </VBox>

                <!-- Column Separator -->
                <Separator orientation="VERTICAL" opacity="0.2" />

                <!-- Score & Actions Column -->
                <VBox spacing="2" prefWidth="210">

                    <!-- Score & Dice side-by-side -->
                    <HBox spacing="4" prefWidth="210" prefHeight="68" alignment="CENTER">
                        <!-- Score -->
                        <StackPane prefWidth="100" prefHeight="62" alignment="CENTER">
                            <Polygon fill="white" stroke="black" strokeWidth="2">
                                <points>
                                    <Double fx:value="8.0" />
                                    <Double fx:value="0.0" />
                                    <Double fx:value="108.0" />
                                    <Double fx:value="0.0" />
                                    <Double fx:value="100.0" />
                                    <Double fx:value="62.0" />
                                    <Double fx:value="0.0" />
                                    <Double fx:value="62.0" />
                                </points>
                            </Polygon>
                            <VBox alignment="CENTER" spacing="2">
                                <Label text="Score"
                                    style="-fx-font-size: 11; -fx-text-fill: black; -fx-font-weight: bold;" />
                                <Label fx:id="scoreValue"
                                    style="-fx-font-size: 17; -fx-text-fill: black; -fx-font-weight: bold;" />
                            </VBox>
                        </StackPane>

                        <!-- Dice -->
                        <StackPane prefWidth="100" prefHeight="62" alignment="CENTER">
                            <Polygon fill="white" stroke="black" strokeWidth="2">
                                <points>
                                    <Double fx:value="8.0" />
                                    <Double fx:value="0.0" />
                                    <Double fx:value="108.0" />
                                    <Double fx:value="0.0" />
                                    <Double fx:value="100.0" />
                                    <Double fx:value="62.0" />
                                    <Double fx:value="0.0" />
                                    <Double fx:value="62.0" />
                                </points>
                            </Polygon>
                            <VBox alignment="CENTER" spacing="2">
                                <Label text="Dice"
                                    style="-fx-font-size: 11; -fx-text-fill: black; -fx-font-weight: bold;" />
                                <Label fx:id="die1Value"
                                    style="-fx-font-size: 17; -fx-text-fill: black; -fx-font-weight: bold;" />
                                <Label fx:id="die2Value"
                                    style="-fx-font-size: 17; -fx-text-fill: black; -fx-font-weight: bold;" />
                            </VBox>
                        </StackPane>
                    </HBox>

                    <!-- Action buttons -->
                    <VBox fx:id="actionButtonsBox" spacing="1.5" prefWidth="210"
                        alignment="TOP_CENTER" VBox.vgrow="ALWAYS">
                        <Label text="Actions"
                            style="-fx-font-size: 9; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 0 0 3 0;" />
                        <Button fx:id="buildRoadButton"
                            onAction="#switchToBUILDROADPHASE"
                            text="Build Road"
                            prefWidth="210"
                            style="-fx-padding: 5; -fx-font-size: 9;" />
                        <Button fx:id="buildSettlementButton"
                            onAction="#switchToBUILDSETTLEMENTPHASE"
                            text="Build Settlement"
                            prefWidth="210"
                            style="-fx-padding: 5; -fx-font-size: 9;" />
                        <Button fx:id="buildCityButton"
                            onAction="#switchToBUILDCITYPHASE"
                            text="Build City"
                            prefWidth="210"
                            style="-fx-padding: 5; -fx-font-size: 9;" />
                        <Button fx:id="playDevCardButton"
                            text="Play Dev Card"
                            prefWidth="210"
                            style="-fx-padding: 5; -fx-font-size: 9;" />
                        <Button fx:id="rollDiceButton"
                            onAction="#rollDice"
                            text="Roll Dice"
                            prefWidth="210"
                            style="-fx-padding: 5; -fx-font-size: 9;" />
                        <Button fx:id="tradeButton"
                            text="Trade"
                            prefWidth="210"
                            style="-fx-padding: 5; -fx-font-size: 9;" />
                        <Button fx:id="buildButton"
                            onAction="#switchToBUILDINGPHASE"
                            text="Build"
                            prefWidth="210"
                            style="-fx-padding: 5; -fx-font-size: 9;" />
                        <Button fx:id="endTurnButton"
                            onAction="#nextPlayer"
                            text="End Turn"
                            prefWidth="210"
                            style="-fx-padding: 5; -fx-font-size: 9;" />
                    </VBox>
                </VBox>
            </HBox>
        </VBox>
    </Pane>

</Pane>